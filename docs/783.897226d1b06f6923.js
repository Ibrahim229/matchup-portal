"use strict";(self.webpackChunkacacia_p3=self.webpackChunkacacia_p3||[]).push([[783],{3783:(X,p,o)=>{o.r(p),o.d(p,{RecommendationModule:()=>V});var c=o(6895),g=o(9299),f=o(9646),M=o(2026),h=o(9195),R=o(8568),O=o(7453),_=o(8314),v=o(4006),C=o(8522),t=o(4650),r=o(5412),m=o(3848),L=o(8112),S=o(529);let A=(()=>{class n{constructor(e,i){this.xhrService=e,this.http=i}getRecommendationsListing(){return this.xhrService.call({url:"superAdmin/pitch",method:m.n.get,body:{}})}getRecommendations(){return this.xhrService.call({url:"pitch/recommended",method:m.n.get,body:{}})}addRecommendation(e){return this.xhrService.call({url:`pitch/recommended/${e}`,method:m.n.get,body:{}})}deleteRecommendation(e){return this.xhrService.call({url:`pitch/recommended/${e}`,method:m.n.delete,body:{}})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(L.d),t.LFG(S.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=o(6892),T=o(8952),N=o(598),l=o(3081);function Z(n,a){1&n&&(t.TgZ(0,"div",11)(1,"span",12),t._uU(2,"Loading..."),t.qZA()())}const I=function(n){return{list:n,key:"_id",value:"name"}};function E(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"h1",4),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"form-input",6),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onAddRecommendation())}),t._uU(9),t.ALo(10,"translate"),t.YNc(11,Z,3,0,"div",9),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onDismiss())}),t._uU(13),t.ALo(14,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,9,"RECOMMENDATIONS.ADD_NEW_RECOMMENDATION")),t.xp6(3),t.Q6J("label",t.lcZ(6,11,"RECOMMENDATIONS.SELECT_PITCH"))("type",e.InputTypes.SELECT)("selectOptions",t.VKq(17,I,e.recommendationsList))("FormControl",e.selectedPitch),t.xp6(3),t.Q6J("disabled",e.selectedPitch.invalid),t.xp6(1),t.hij(" ",t.lcZ(10,13,"ACTIONS.CONFIRM")," "),t.xp6(2),t.Q6J("ngIf",e.isNewRecommendationSubmitting),t.xp6(2),t.hij(" ",t.lcZ(14,15,"ACTIONS.CANCEL")," ")}}function y(n,a){1&n&&(t.TgZ(0,"div",13)(1,"span",12),t._uU(2,"Loading..."),t.qZA()())}let D=(()=>{class n{constructor(e,i,s){this.dialogRef=e,this.recommendationService=i,this.toastrService=s,this.InputTypes=_.o,this.isNewRecommendationSubmitting=!1,this.selectedPitch=new v.NI("",v.kI.required),this.recommendationsList=[],this.subs=new h.t,this.isLoadingRecommendations=!1}ngOnInit(){this.subs.add=this.recommendationService.getRecommendationsListing().subscribe(e=>{e.error||(this.recommendationsList=e)})}getRecommendationsListing(){this.isLoadingRecommendations=!0,this.subs.add=this.recommendationService.getRecommendationsListing().subscribe(e=>{e.error||(this.recommendationsList=e,this.isLoadingRecommendations=!1)})}onAddRecommendation(){this.isNewRecommendationSubmitting=!0,this.recommendationService.addRecommendation(this.selectedPitch.value).subscribe(e=>{e.error||(this.toastrService.showToastr(e.message,C.V.success),this.dialogRef.close(!0)),this.isNewRecommendationSubmitting=!1})}onDismiss(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.so),t.Y36(A),t.Y36(x._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["add-recommendation-modal"]],decls:4,vars:2,consts:[["RtlDir","",1,"add-recommendation"],[1,"add-recommendation__form"],[4,"ngIf"],["class","spinner-border text-success","role","status",4,"ngIf"],["mat-dialog-title",""],[1,"form-control-wrapper"],[3,"label","type","selectOptions","FormControl"],[1,"add-recommendation__form__actions"],[1,"btn-fill",3,"disabled","click"],["class","spinner-border-sm text-success","role","status",4,"ngIf"],[1,"btn-outlined",3,"click"],["role","status",1,"spinner-border-sm","text-success"],[1,"visually-hidden"],["role","status",1,"spinner-border","text-success"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,E,15,19,"div",2),t.YNc(3,y,3,0,"div",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!i.isLoadingRecommendations),t.xp6(1),t.Q6J("ngIf",i.isLoadingRecommendations))},dependencies:[c.O5,r.uh,T.C,N.s,l.X$],styles:[".add-recommendation__form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:25px}.add-recommendation__form__result[_ngcontent-%COMP%]{text-align:center}.add-recommendation__form__result[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.add-recommendation__form__result[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]:first-of-type{color:#079247}.add-recommendation__form__result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#eee;padding:20px 0;border-radius:5px;outline:1px dashed #079247;font-size:17px;margin:15px 0}.add-recommendation__form__actions[_ngcontent-%COMP%]{display:flex;gap:10px}.add-recommendation.rtl[_ngcontent-%COMP%]   .add-recommendation__form[_ngcontent-%COMP%]{font-family:Cairo,sans-serif!important}.add-recommendation.rtl[_ngcontent-%COMP%]   .add-recommendation__form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Cairo,sans-serif!important;text-align:end}.add-recommendation.rtl[_ngcontent-%COMP%]   .add-recommendation__form__actions[_ngcontent-%COMP%]{flex-direction:row-reverse}"]}),n})();var P=o(629),Y=o(4859),u=o(8255),F=o(7633);function J(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleAddRecommendation())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"RECOMMENDATIONS.ADD_NEW_RECOMMENDATION")," "))}function U(n,a){1&n&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTIONS.ACTIONS")))}function H(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,U,3,3,"th",12),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"PITCH.PITCH_NAME")),t.xp6(2),t.Q6J("ngIf",e.isHasRole(e.RoleType.Super_Admin))}}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",14)(1,"button",15),t._UZ(2,"i",16),t.qZA(),t.TgZ(3,"mat-menu",14,17)(5,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.handleRemoveRecommendation(null==s?null:s.pitch._id))}),t._uU(6),t.ALo(7,"translate"),t.qZA()()()}if(2&n){const e=t.MAs(4);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(5),t.Oqu(t.lcZ(7,2,"ACTIONS.DELETE"))}}function $(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Q,8,4,"td",13),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(2),t.hij(" ",null==e?null:e.pitch.name," "),t.xp6(1),t.Q6J("ngIf",i.isHasRole(i.RoleType.Super_Admin))}}function w(n,a){}function W(n,a){if(1&n&&(t.TgZ(0,"data-table",8),t.ALo(1,"async"),t.YNc(2,H,5,4,"ng-template",null,9,t.W1O),t.YNc(4,$,4,2,"ng-template",null,10,t.W1O),t.YNc(6,w,0,0,"ng-template",null,11,t.W1O),t.qZA()),2&n){const e=t.oxw();t.Q6J("pagination",!1)("dataSource",t.lcZ(1,2,e.recommendationsTable$))}}let G=(()=>{class n{constructor(e,i,s,d){this.recommendationService=e,this.dialog=i,this.translationService=s,this.toastrService=d,this.recommendationsTable$=(0,f.of)({data:[],pageIndex:0,length:0,emptyState:"No Data Found!"}),this.subs=new h.t,this.InputTypes=_.o,this.RoleType=R.G}ngOnInit(){this.subs.add=this.translationService.currentLanguage$.subscribe(()=>{this.getRecommendations()})}getRecommendations(){this.subs.add=this.recommendationService.getRecommendations().subscribe(e=>{this.recommendationsTable$=(0,f.of)({data:e,pageIndex:1,length:e.length,emptyState:"LABELS.NO_DATA"})})}handleRemoveRecommendation(e){return this.dialog.open(M.$,{maxWidth:"550px",minWidth:"500px",data:{title:"RECOMMENDATIONS.DELETE_RECOMMENDATION",message:"LABELS.FORM.ARE_YOU_SURE",actionLabel:"ACTIONS.DELETE"}}).afterClosed().subscribe(d=>{if(!d)return d;this.subs.add=this.recommendationService.deleteRecommendation(e).subscribe(b=>{b.error||(this.toastrService.showToastr(b.message,C.V.success),this.getRecommendations())})})}handleAddRecommendation(){return this.dialog.open(D,{maxWidth:"550px",minWidth:"500px",disableClose:!0}).afterClosed().subscribe(i=>{if(!i)return i;this.getRecommendations()})}isHasRole(e){return(0,O.a)(e)}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A),t.Y36(r.uw),t.Y36(P.D),t.Y36(x._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["recommendations-listing"]],decls:10,vars:5,consts:[[1,"page-container","contracts-listing"],[1,"page-header"],[1,"btn-wrapper"],["class","ac-btn btn-fill",3,"click",4,"ngIf"],[1,"page-content"],[1,"table-wrapper"],["class","preview__table",3,"pagination","dataSource",4,"ngIf"],[1,"ac-btn","btn-fill",3,"click"],[1,"preview__table",3,"pagination","dataSource"],["tableHead",""],["tableRows",""],["loaderRef",""],[4,"ngIf"],["RtlDir","",4,"ngIf"],["RtlDir",""],["mat-button","",3,"matMenuTriggerFor"],[1,"fa-solid","fa-ellipsis"],["menu","matMenu"],["mat-menu-item","","RtlDir","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,J,3,3,"button",3),t.qZA()(),t.TgZ(7,"div",4)(8,"section",5),t.YNc(9,W,8,4,"data-table",6),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"PITCH.RECOMMENDATIONS")," "),t.xp6(3),t.Q6J("ngIf",i.isHasRole(i.RoleType.Super_Admin)),t.xp6(3),t.Q6J("ngIf",i.recommendationsTable$))},dependencies:[c.O5,Y.lW,u.VK,u.OP,u.p6,T.C,F.Q,c.Ov,l.X$]}),n})();var j=o(7115);const z=[{title:"Recommendations",path:"",children:[{title:"Recommendations Listing",path:"",component:G,data:{pre:[R.G.Super_Admin]},canActivate:[j.t]}]}];let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(z),g.Bz]}),n})();var K=o(2271);let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,l.aw,K.m,B]}),n})()}}]);